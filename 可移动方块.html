<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>移动方块</title>
</head>
<style>
html,body,div,ul,li,table,a,span,ol{padding:0;margin:0;font-size:14px;font-family:"微软雅黑";}
ul,li{list-style:none;}
a{text-decoration:none;}
body{position:relative;}
#div1{width:500px; height:500px;border:1px #000 solid;position:absolute;top:200px;left:200px;}
#div2{width:200px;height:200px;background:#333;position:absolute;top:0;left:0;}
</style>
<body>
<div id="div1">
	<div id="div2"></div>
</div>
</body>
<script>
var div1=document.getElementById('div1'),
	div2=document.getElementById('div2');
	
	document.onmousedown=function(e){
		e=e||window.event;
		var disX=e.clientX-div2.offsetLeft,//鼠标位置X轴方向固定偏移量
			disY=e.clientY-div2.offsetTop;//鼠标位置Y轴方向固定偏移量
		document.onmousemove=function(ev){
			ev=ev||window.event;
			var l=ev.clientX-disX,
				t=ev.clientY-disY,
				ow=div1.offsetWidth-div2.offsetWidth,
				oh=div1.offsetHeight-div2.offsetHeight
			//是否超过外边框
			l=l<0?0:l;
			l=l>ow?ow:l;
			t=t<0?0:t;
			t=t>oh?oh:t;
			
			div2.style.left=l+'px';
			div2.style.top=t+'px';
		}
		document.onmouseup=function(e){
			this.onmousemove=null;
		}
	}
</script>
</html>
